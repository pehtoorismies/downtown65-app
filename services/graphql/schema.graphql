scalar AWSDateTime

directive @aws_api_key on OBJECT | FIELD_DEFINITION

enum EventType {
  KARONKKA
  MEETING
  NORDIC_WALKING
  ORIENTEERING
  OTHER
  RUNNING
  SKIING
  SPINNING
  SWIMMING
  TRACK_RUNNING
  TRAIL_RUNNING
  TRIATHLON
  ULTRAS
}

type Event {
  id: ID!
  title: String!
  subtitle: String
  type: EventType!
  race: Boolean!
  exactDate: Boolean @deprecated(reason: "exactDate is deprecated. Legacy.")
}

type User @aws_api_key {
  id: String!
  email: String!
  name: String!
  nickname: String
  preferences: Preferences!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime
}

type Query {
  event(eventId: String!): Event
  # Future events
  events: [Event!]
  me: User!
  findEvent(eventId: String!): Event @deprecated(reason: "findEvent is deprecated. Use event instead.")
  findManyEvents(limit: Int): [Event!]! @deprecated(reason: "findManyEvents is deprecated. Use events instead.")
}

input EventData {
  title: String!
  subtitle: String
  race: Boolean
  type: String!
  date: String!
  exactTime: Boolean = false
}

type AuthPayload @aws_api_key {
  accessToken: String!
  idToken: String!
  expiresIn: String!
}

type Preferences {
  subscribeWeeklyEmail: Boolean!
  subscribeEventCreationEmail: Boolean!
}

type Mutation {
  createEvent(
    event: EventData!
    addMe: Boolean = false
    notifySubscribers: Boolean = true
  ): Event!

  login(
    email: String!
    password: String!
  ): AuthPayload! @aws_api_key

  signup(
    email: String!
    nickname: String!
    password: String!
    name: String!
    registerSecret: String!
  ): User! @aws_api_key

}


